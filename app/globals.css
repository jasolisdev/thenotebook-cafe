@import "tailwindcss";

/* Tailwind v4 Theme Configuration */
@theme {
  /* Core Palette */
  --color-cafe-black: #2c2420;
  --color-cafe-brown: #4a3b32;
  --color-cafe-tan: #a48d78;
  --color-cafe-tan-dark: #8e7965;
  --color-cafe-beige: #cbb9a4;
  --color-cafe-luxe-oat: #cbbfaf;
  --color-cafe-cream: #ede7d8;
  --color-cafe-mist: #f4f1ea;
  --color-cafe-white: #fdfbf7;
  --color-cafe-olive: #4a4f41;

  /* Premium Navbar/Footer Palette */
  --color-coffee-50: #f3efe9;
  --color-coffee-100: #e6dcca;
  --color-coffee-900: #2c241f;

  /* Extended Palette */
  --color-espresso-brown: #2a1f16;
  --color-warm-brown: #5a4a38;
}

/* ============================================================
   CUSTOM FONTS
============================================================ */
/*
  Primary fonts (Inter, Playfair Display, Torus) are loaded via
  Next.js font optimization in app/fonts.ts for better performance.

  Additional fonts below are kept as @font-face for accessibility
  and optional features.
*/

/* OpenDyslexic Font for Accessibility */
@font-face {
  font-family: "OpenDyslexic";
  src: url("/fonts/OpenDyslexic-Regular.woff") format("woff");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "OpenDyslexic";
  src: url("/fonts/OpenDyslexic-Bold.woff") format("woff");
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "OpenDyslexic";
  src: url("/fonts/OpenDyslexic-Italic.woff") format("woff");
  font-weight: 400;
  font-style: italic;
  font-display: swap;
}

/* Alpino Font Family */
@font-face {
  font-family: "Alpino";
  src: url("/fonts/Alpino-Thin.otf") format("opentype");
  font-weight: 100;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "Alpino";
  src: url("/fonts/Alpino-Light.otf") format("opentype");
  font-weight: 300;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "Alpino";
  src: url("/fonts/Alpino-Regular.otf") format("opentype");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "Alpino";
  src: url("/fonts/Alpino-Medium.otf") format("opentype");
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "Alpino";
  src: url("/fonts/Alpino-Bold.otf") format("opentype");
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "Alpino";
  src: url("/fonts/Alpino-Black.otf") format("opentype");
  font-weight: 900;
  font-style: normal;
  font-display: swap;
}


/* ============================================================
   DESIGN TOKENS
=========================================================== */
:root {
  --font-sans: "Torus", "Inter", system-ui, sans-serif;
  --font-display: "Playfair Display", serif;
  --font-playfair: "Playfair Display";
  --font-inter: "Inter";
  --site-header-height: 80px;

  /* Menu Page Fonts */
  --font-serif: var(--font-playfair), "Playfair Display", serif;
  /* Used for Titles, Headers, Prices */
  --font-sans-menu: var(--font-inter), "Inter", sans-serif;
  /* Used for Descriptions, UI, Buttons */

  /* ===============================
     COLOR SYSTEM
     All colors now defined in @theme above
     RGB helpers & semantic tokens below
  =============================== */

  /* RGB helpers for rgba() usage */
  --cafe-black-rgb: 44, 36, 32;
  --cafe-brown-rgb: 74, 59, 50;
  --cafe-tan-rgb: 164, 141, 120;
  --cafe-beige-rgb: 203, 185, 164;
  --cafe-cream-rgb: 237, 231, 216;
  --cafe-mist-rgb: 244, 241, 234;

  /* Premium Navbar/Footer RGB */
  --coffee-50-rgb: 243, 239, 233;
  /* Off-White */
  --coffee-100-rgb: 230, 220, 202;
  /* Cream */

  /* Extended RGB helpers */
  --espresso-brown-rgb: 42, 31, 22;

  /* Core semantic tokens */
  --bg-solid: var(--color-cafe-mist);
  --bg-dark: var(--color-cafe-black);

  /* Text colors */
  --text-dark: var(--color-cafe-brown);
  --text-light: var(--color-cafe-mist);
  --text-light-muted: var(--color-cafe-beige);

  /* Glass panel effect */
  --glass-bg: rgba(250, 249, 246, 0.85);

  /* Opacity levels for consistent transparency */
  --opacity-subtle: 0.08;
  --opacity-light: 0.12;
  --opacity-medium: 0.25;
  --opacity-strong: 0.5;

  /* Common transparency combinations */
  --tan-subtle: rgba(var(--cafe-tan-rgb), var(--opacity-subtle));
  --tan-light: rgba(var(--cafe-tan-rgb), var(--opacity-light));
  --tan-medium: rgba(var(--cafe-tan-rgb), var(--opacity-medium));
  --tan-strong: rgba(var(--cafe-tan-rgb), var(--opacity-strong));

  --dark-overlay: rgba(0, 0, 0, var(--opacity-medium));
  --white-overlay: rgba(255, 255, 255, var(--opacity-light));
  --black-overlay-subtle: rgba(0, 0, 0, var(--opacity-subtle));
  --white-overlay-subtle: rgba(255, 255, 255, var(--opacity-subtle));
}

/* ============================================================
   BASE ELEMENTS
============================================================ */

/* CRITICAL FIX: Removed height: 100% constraint

   BEFORE: html, body, #__next { height: 100%; }
   PROBLEM: Forced body to viewport height, preventing natural document scrolling
   SYMPTOM: document.scrollHeight === window.innerHeight (663px = 663px)
   RESULT: Browser couldn't scroll properly, content appeared offset

   NOW: Body grows naturally with content, allowing proper scroll behavior

   IMPORTANT: No overflow on html - this allows sticky positioning to work!
*/

html {
  font-family: var(--font-sans);
  margin: 0;
  padding: 0;
  width: 100%;
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  /* No overflow property - allows position: sticky to work */
}

body {
  font-family: var(--font-sans);
  letter-spacing: 0;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
  /* Only hide horizontal overflow */
  width: 100%;
  min-height: 100vh;
  /* Allow body to grow beyond viewport */
  background-color: var(--bg-solid);
  color: var(--text-dark);
  /* Re-enabled scroll anchoring for proper scroll restoration */
  overflow-anchor: auto;
}

/* Sanity Studio should fully take over the viewport */
body.studio-mode {
  overflow: hidden;
  overscroll-behavior: none;
}

.studio-root {
  position: fixed;
  inset: 0;
  z-index: 9999;
  height: 100dvh;
  overflow: auto;
  background: var(--bg-solid);
}

/* Hide horizontal scrollbar for hero gallery track */
.scrollbar-none::-webkit-scrollbar {
  display: none;
}

.scrollbar-none {
  scrollbar-width: none;
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.no-scrollbar::-webkit-scrollbar {
  display: none;
}

.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.notched-mobile {
  overflow: visible;
}

/* Glass panel effect */
.glass-panel {
  background: var(--glass-bg);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}

/* ============================================================
   GLOBAL UTILITIES
============================================================ */
.site-layout {
  min-height: 100dvh;
  background: var(--bg-solid);
  color: var(--text-light);
  /* No padding-top needed - navbar is fixed and doesn't take up space */
}

/* Text color utilities for dark backgrounds */
.text-light {
  color: var(--text-light);
}

.text-light-muted {
  color: var(--text-light-muted);
}

/* Legacy class names (deprecated - use .text-light instead) */
.ink-cream {
  color: var(--text-light);
}

.ink-cream-dim {
  color: var(--text-light-muted);
}

/* ============================================================
   TYPOGRAPHY
============================================================ */
.font-display {
  font-family: var(--font-display);
}

.font-playfair {
  font-family: var(--font-playfair);
}

.font-inter {
  font-family: var(--font-inter);
}

h1,
h2,
h3 {
  font-family: var(--font-display);
}

/* ============================================================
   CORE ANIMATIONS
============================================================ */
@keyframes mask-up {
  from {
    transform: translateY(110%);
  }

  to {
    transform: translateY(0);
  }
}

.animate-mask-up {
  animation: mask-up 1.4s cubic-bezier(0.19, 1, 0.22, 1) both;
}

.animate-fade-up {
  animation: fadeInUp 1s cubic-bezier(0.19, 1, 0.22, 1) both;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pulse {
  0%,
  100% {
    opacity: 0.6;
    transform: scale(1);
  }

  50% {
    opacity: 1;
    transform: scale(1.1);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

@keyframes pulseGlow {
  0%,
  100% {
    box-shadow: 0 0 20px rgba(164, 141, 120, 0.1);
  }

  50% {
    box-shadow: 0 0 30px rgba(164, 141, 120, 0.2);
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes float {
  0%,
  100% {
    transform: translateY(0);
  }

  50% {
    transform: translateY(-15px);
  }
}

/* Hero Background Zoom Animation */
@keyframes hero-zoom {
  0% {
    transform: scale(1.3) translateZ(0);
  }
  100% {
    transform: scale(1) translateZ(0);
  }
}

/* Less dramatic zoom on desktop */
@keyframes hero-zoom-desktop {
  0% {
    transform: scale(1.05) translateZ(0);
  }
  100% {
    transform: scale(1) translateZ(0);
  }
}

.animate-hero-zoom {
  animation: hero-zoom 10s ease-out forwards;
  transform-origin: center center;
  will-change: transform;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  perspective: 1000px;
  -webkit-perspective: 1000px;
}

/* Faster and less dramatic zoom on desktop */
@media (min-width: 768px) {
  .animate-hero-zoom {
    animation-name: hero-zoom-desktop;
    animation-duration: 7s;
  }
}

/* ============================================================
   SCROLL REVEAL SYSTEM - Rebuilt from scratch
   Speed: Quick (0.5s)
   Style: Fade + Scale
   Trigger: 50px before viewport
============================================================ */

/* Scroll-triggered animation (below the fold) */
@keyframes scrollReveal {
  from {
    opacity: 0;
    transform: scale(0.95);
  }

  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Initial page load animation (above the fold) */
@keyframes fadeInQuick {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

/* Default state - hidden */
.scroll-reveal {
  opacity: 0;
  transform: scale(0.95);
}

/* Scroll-triggered reveal - Quick 0.5s */
.scroll-reveal.is-visible:not(.above-fold) {
  animation: scrollReveal 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

/* Above-the-fold reveal - Instant 0.3s fade */
.scroll-reveal.is-visible.above-fold {
  animation: fadeInQuick 0.3s ease-out forwards;
}

/* ============================================================
   MASKED EDITORIAL REVEAL SYSTEM
   High-end magazine-style page load animations
============================================================ */

/* The Mask Container - Hides text before reveal */
.reveal-mask {
  overflow: hidden;
  display: block;
  padding-bottom: 0.22em;
  margin-bottom: -0.22em;
  /* Extra room for descenders while keeping layout height stable */
}

/* The Moving Text - Slides up from below */
.reveal-text-anim {
  display: block;
  transform: translateY(110%);
  /* Start completely out of view below */
  opacity: 0;
  animation: slideUpReveal 0.8s cubic-bezier(0.19, 1, 0.22, 1) forwards;
}

@keyframes slideUpReveal {
  0% {
    transform: translateY(110%);
    opacity: 0;
  }

  100% {
    transform: translateY(0);
    opacity: 1;
  }
}

/* The Body Fade - Soft fade up for body content */
.fade-up {
  opacity: 0;
  transform: translateY(30px);
  transition:
    opacity 1s cubic-bezier(0.19, 1, 0.22, 1),
    transform 1s cubic-bezier(0.19, 1, 0.22, 1);
}

.fade-up.visible {
  opacity: 1;
  transform: translateY(0);
}

/* ============================================================
   ACCESSIBILITY
============================================================ */
::selection {
  background: rgba(164, 141, 120, 0.3);
  color: var(--color-cafe-black);
}

*:focus-visible {
  outline: 2px solid rgba(164, 141, 120, 0.5);
  outline-offset: 2px;
}

/* Accessibility Widget Styles */
.acc-grayscale {
  filter: grayscale(100%);
}

.acc-contrast {
  filter: contrast(125%);
}

/* Hide images but keep UI icons (SVGs) visible */
.acc-hide-images main img {
  visibility: hidden;
}

/* For elements with inline background images, just remove the image so text remains visible */
.acc-hide-images main [style*="background-image"] {
  background-image: none !important;
}

/* When images are hidden, ensure Hero sections have the "Gray" look (Mist background + Dark Overlay) */
.acc-hide-images main section[data-section="Hero"] {
  background-color: var(--color-cafe-mist) !important;
}

/* Force text to White/Cream for readability against the gray background */
.acc-hide-images .home-hero-title,
.acc-hide-images .home-hero-subtitle,
.acc-hide-images .home-hero-pill,
.acc-hide-images .home-hero-cta,
.acc-hide-images .home-hero-copy,
.acc-hide-images .home-hero-grid,
.acc-hide-images .hero-latte-card,
.acc-hide-images .hero-latte-pill,
.acc-hide-images main section[data-section="Hero"] h1,
.acc-hide-images main section[data-section="Hero"] p,
.acc-hide-images main section[data-section="Hero"] span {
  color: var(--color-cafe-white) !important;
  fill: var(--color-cafe-white) !important;
  text-shadow: 0 2px 10px rgba(0,0,0,0.3) !important;
}

/* Hide decorative blobs/shapes for reduced visual noise */

.acc-hide-images .home-hero-pill,
.acc-hide-images .hero-latte-card {
  background-color: rgba(var(--cafe-cream-rgb), 0.9) !important;
  border-color: rgba(var(--cafe-brown-rgb), 0.2) !important;
}

/* Navigation readability when images are hidden */
.acc-hide-images .site-header {
  background: rgba(var(--cafe-cream-rgb), 0.92) !important;
  border-bottom-color: rgba(var(--cafe-brown-rgb), 0.12) !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
}

.acc-hide-images .nav-link,
.acc-hide-images .site-header a,
.acc-hide-images .site-header span {
  color: var(--color-cafe-black) !important;
  fill: var(--color-cafe-black) !important;
}

.acc-hide-images .hamburger-line {
  background-color: var(--color-cafe-black) !important;
}

/* Ensure navigation, accessibility widget, and UI icons remain visible */
.acc-hide-images nav svg,
.acc-hide-images nav img,
.acc-hide-images [class*="accessibility"] svg,
.acc-hide-images [id*="accessibility"] svg,
.acc-hide-images button svg,
.acc-hide-images [role="button"] svg,
.acc-hide-images .acc-icon-only svg {
  visibility: visible !important;
}

.acc-cursor-lg,
.acc-cursor-lg * {
  cursor:
    url("data:image/svg+xml,%3Csvg width='48' height='48' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M20.5056 10.7754C21.1225 10.5355 21.431 10.4155 21.5176 10.2459C21.5926 10.099 21.5903 9.92446 21.5115 9.77954C21.4205 9.61226 21.109 9.50044 20.486 9.2768L4.59629 3.5728C4.0866 3.38983 3.83175 3.29835 3.66514 3.35605C3.52029 3.40621 3.40645 3.52004 3.35629 3.6649C3.29859 3.8315 3.39008 4.08635 3.57304 4.59605L9.277 20.4858C9.50064 21.1088 9.61246 21.4203 9.77973 21.5113C9.92465 21.5901 10.0991 21.5924 10.2461 21.5174C10.4157 21.4308 10.5356 21.1223 10.7756 20.5054L13.3724 13.8278C13.4194 13.707 13.4429 13.6466 13.4792 13.5957C13.5114 13.5506 13.5508 13.5112 13.5959 13.479C13.6468 13.4427 13.7072 13.4192 13.828 13.3722L20.5056 10.7754Z' fill='white' stroke='%232C2420' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E")
      4 4,
    auto !important;
}

.acc-cursor-lg button,
.acc-cursor-lg a,
.acc-cursor-lg [role="button"] {
  cursor:
    url("data:image/svg+xml,%3Csvg width='48' height='48' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M20.5056 10.7754C21.1225 10.5355 21.431 10.4155 21.5176 10.2459C21.5926 10.099 21.5903 9.92446 21.5115 9.77954C21.4205 9.61226 21.109 9.50044 20.486 9.2768L4.59629 3.5728C4.0866 3.38983 3.83175 3.29835 3.66514 3.35605C3.52029 3.40621 3.40645 3.52004 3.35629 3.6649C3.29859 3.8315 3.39008 4.08635 3.57304 4.59605L9.277 20.4858C9.50064 21.1088 9.61246 21.4203 9.77973 21.5113C9.92465 21.5901 10.0991 21.5924 10.2461 21.5174C10.4157 21.4308 10.5356 21.1223 10.7756 20.5054L13.3724 13.8278C13.4194 13.707 13.4429 13.6466 13.4792 13.5957C13.5114 13.5506 13.5508 13.5112 13.5959 13.479C13.6468 13.4427 13.7072 13.4192 13.828 13.3722L20.5056 10.7754Z' fill='white' stroke='%232C2420' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E")
      4 4,
    pointer !important;
}

.acc-highlight-links a:not(.acc-widget-panel *),
.acc-highlight-links button:not([aria-label="Accessibility Options"]):not(.acc-widget-panel *) {
  background-color: #FFEB3B !important;
  color: #000000 !important;
  text-decoration: underline !important;
  border-radius: 2px;
  padding: 0 4px;
  outline: 2px solid #000000 !important;
}

.bionic-bold {
  font-weight: 700;
}

#reading-guide-line {
  position: fixed;
  left: 0;
  right: 0;
  height: 5px;
  background-color: #DC2626;
  pointer-events: none;
  z-index: 9999;
}

.acc-text-lg {
  font-size: 1.125rem;
}

.acc-text-xl {
  font-size: 1.35rem;
}

.acc-readable-font {
  font-family: "Arial", sans-serif !important;
}

.acc-dyslexia-font {
  font-family: "OpenDyslexic", sans-serif !important;
}

.acc-dyslexia-font body,
.acc-dyslexia-font body * {
  font-family: "OpenDyslexic", sans-serif !important;
}

.acc-stop-animations * {
  animation: none !important;
  transition: none !important;
}

/* Force hidden animated elements to be visible when animations are stopped */
.acc-stop-animations .reveal-text-anim {
  transform: translateY(0) !important;
  opacity: 1 !important;
}

.acc-stop-animations .scroll-reveal {
  transform: scale(1) !important;
  opacity: 1 !important;
}

.acc-stop-animations .fade-up {
  transform: translateY(0) !important;
  opacity: 1 !important;
}

/* On mobile, completely hide the image containers instead of leaving empty boxes */
@media (max-width: 768px) {
  .acc-hide-images .relative.aspect-\[4\/3\],
  .acc-hide-images .relative.aspect-\[3\/4\],
  .acc-hide-images .contact-map-frame,
  .acc-hide-images .story-map-frame {
    display: none !important;
  }
  
  /* Ensure Hero sections are NOT hidden */
  .acc-hide-images main section[data-section="Hero"] .relative.aspect-\[4\/3\],
  .acc-hide-images main section[data-section="Hero"] .relative.aspect-\[3\/4\] {
    display: block !important;
  }
}

/* ============================================================
   SHARED COMPONENTS (Global)
============================================================ */

/* Shared Quote Section (Originally from Contact Page) */
.contact-quote {
  background-color: rgba(var(--cafe-tan-rgb), 0.08);
  border: 1px solid rgba(var(--cafe-tan-rgb), 0.2);
}

.contact-quote__icon {
  color: var(--color-cafe-tan);
}

.contact-quote__text {
  color: rgba(var(--cafe-brown-rgb), 0.8);
}

.contact-quote__footer {
  color: var(--color-cafe-tan);
}
